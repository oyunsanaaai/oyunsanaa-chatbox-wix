<!doctype html>
<html lang="mn">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>–û—é—É–Ω—Å–∞–Ω–∞–∞ ¬∑ —á–∞—Ç</title>
  <link rel="stylesheet" href="oy.css"/>
  <link rel="manifest" href="/manifest.webmanifest">
<meta name="theme-color" content="#0b1022">
<!-- iOS –¥—ç–º–∂–ª—ç–≥ -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="apple-touch-icon" href="/icons/192.png">
  <script defer src="oy.js"></script>
</head>
<body>
  <!-- (–æ–¥–æ–æ–≥–∏–π–Ω chat-–∏–π–Ω —Ö—É—É–¥—Å–∞–Ω–¥–∞–∞ –Ω—ç–º—ç—Ö) AUTH OVERLAY UI -->
<style>
  #os-auth{position:fixed;inset:0;display:none;place-items:center;background:linear-gradient(180deg,#0a1a2d80,#0a1a2dcc);backdrop-filter:blur(8px);z-index:2147483647}
  #os-auth.show{display:grid}
  #os-auth .card{width:min(92vw,520px);padding:28px;border-radius:18px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.18);color:#eaf2ff;box-shadow:0 10px 40px rgba(0,0,0,.35)}
  #os-auth h1{margin:0 0 6px 0;font:600 20px/1.2 Inter,system-ui}
  #os-auth .sub{margin:0 0 16px 0;color:#b7c7e6;font:400 14px/1.4 Inter,system-ui}
  #os-auth label{display:block;margin:12px 0 6px;color:#b7c7e6;font:400 13px Inter}
  #os-auth input[type=text],#os-auth input[type=password]{width:100%;padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.18);background:rgba(0,0,0,.25);color:#eaf2ff;outline:none}
  #os-auth input:focus{border-color:#8ec1ff; box-shadow:0 0 0 3px rgba(110,169,255,.2)}
  #os-auth .row{display:flex;gap:12px;margin-top:16px}
  #os-auth .btn{flex:1;padding:12px 16px;border-radius:12px;border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.06);color:#eaf2ff;font-weight:600;cursor:pointer}
  #os-auth .btn.primary{background:#6aa9ff;border-color:transparent;color:#081c3a}
  #os-auth .muted{display:flex;justify-content:space-between;align-items:center;margin-top:12px;color:#b7c7e6;font-size:13px}
  #os-auth .muted a{color:#a9c8ff;text-decoration:none}
  #os-auth .remember{display:flex;align-items:center;gap:8px}
  #os-auth .err{margin-top:12px;color:#ffb4b4;font-size:13px;display:none}
</style>

<div id="os-auth" aria-hidden="true">
  <div class="card">
    <h1>–û—é—É–Ω—Å–∞–Ω–∞–∞ ¬∑ –ù—ç–≤—Ç—Ä—ç—Ö</h1>
    <div class="sub">–®–∏–Ω—ç —Ö—ç—Ä—ç–≥–ª—ç–≥—á–∏–¥ oyunsanaa.com –¥—ç—ç—Ä –±“Ø—Ä—Ç–≥“Ø“Ø–ª–Ω—ç, –≥–∏—à“Ø“Ø–¥ —à—É—É–¥ –Ω—ç–≤—Ç—ç—Ä–Ω—ç.</div>

    <label>–ò-–º—ç–π–ª —ç—Å–≤—ç–ª —É—Ç–∞—Å</label>
    <input id="os_auth_email" type="text" placeholder="name@mail.com —ç—Å–≤—ç–ª 88‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="username" />

    <label>–ù—É—É—Ü “Ø–≥</label>
    <input id="os_auth_pass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" />

    <div class="muted">
      <label class="remember"><input id="os_auth_rem" type="checkbox" /> –ù–∞–º–∞–π–≥ —Å–∞–Ω–∞</label>
      <a href="https://oyunsanaa.com/support" target="_blank" rel="noopener">–ù—É—É—Ü “Ø–≥ –º–∞—Ä—Ç—Å–∞–Ω</a>
    </div>

    <div class="row">
      <button id="os_auth_login" class="btn primary">–ì–∏—à“Ø“Ø–¥ –Ω—ç–≤—Ç—Ä—ç—Ö</button>
      <button id="os_auth_signup" class="btn">–®–∏–Ω—ç —Ö—ç—Ä—ç–≥–ª—ç–≥—á</button>
    </div>

    <div id="os_auth_err" class="err">–ù—ç–≤—Ç—Ä—ç—Ö –∞–º–∂–∏–ª—Ç–≥“Ø–π. –ù—É—É—Ü “Ø–≥—ç—ç —à–∞–ª–≥–∞–∞—Ä–∞–π.</div>
  </div>
</div>

  <div id="oyOverlay" class="oy-overlay" hidden></div>

  <!-- HEADER -->
  <header class="oy-header">
    <!-- 3 –∑—É—Ä–∞–∞—Å -->
    <button id="btnDrawer" class="oy-iconbtn" aria-label="–ú–µ–Ω—é">
      <svg viewBox="0 0 24 24"><path d="M3 6h18v2H3zM3 11h18v2H3zM3 16h18v2H3z"/></svg>
    </button>

    <!-- –õ–æ–≥–æ + –≥–∞—Ä—á–∏–≥ (–≥–æ–ª–¥) -->
    <div class="oy-head-title">
      <div class="oy-status"><span class="oy-dot"></span></div>     
      <div class="oy-head-text">
        <div id="chatTitle" class="oy-title"> –û—é—É–Ω—Å–∞–Ω–∞–∞ ‚Äî –ß–∞—Ç</div>
      </div>
    </div>

    <!-- ”®–Ω–≥”© —Å–æ–Ω–≥–æ–ª—Ç (–±–∞—Ä—É—É–Ω –¥—ç—ç–¥) -->
    <div id="themePicker" class="oy-themes" aria-label="”®–Ω–≥”© —Å–æ–Ω–≥–æ—Ö"></div>
  </header>

  <div class="oy-shell">
    <!-- SIDEBAR -->
    <aside id="oyDrawer" class="oy-drawer" aria-label="–ú–µ–Ω—é">
      <div class="oy-side">
        <div class="oy-side-title">–ú–µ–Ω—é</div>

        <!-- 1) –ë“Ø—Ä—Ç–≥—ç–ª (–Ω–∞—Å —Å–æ–Ω–≥–æ–æ–¥ –±“Ø—Ä—Ç–≥“Ø“Ø–ª—ç—Ö) -->
        <button class="oy-item" data-menu="register">–ë“Ø—Ä—Ç–≥—ç–ª</button>
        <section class="oy-pane" data-pane="register" hidden>
          <div class="oy-note" style="margin-bottom:8px">
            –î–æ–æ—Ä–æ–æ—Å –Ω–∞—Å–Ω—ã –∞–Ω–≥–∏–ª–ª–∞–∞ —Å–æ–Ω–≥–æ–æ–¥ ‚Äú–ë“Ø—Ä—Ç–≥“Ø“Ø–ª—ç—Ö‚Äù –¥–∞—Ä–Ω–∞ —É—É.
          </div>
          <form id="ageForm" class="oy-list">
            <label class="reg-row"><input type="radio" name="age" value="–°—ç—Ä–≥—ç–ª—ç–Ω ”©—Å–≤”©—Ä “Ø–µ (13‚Äì18)"> –°—ç—Ä–≥—ç–ª—ç–Ω ”©—Å–≤”©—Ä “Ø–µ (13‚Äì18)</label>
            <label class="reg-row"><input type="radio" name="age" value="–≠—Ö–ª—ç–ª, –º”©—Ä”©”©–¥–ª–∏–π–Ω “Ø–µ (19‚Äì25)"> –≠—Ö–ª—ç–ª,–º”©—Ä”©”©–¥–ª–∏–π–Ω “Ø–µ (19‚Äì29)</label>
            <label class="reg-row"><input type="radio" name="age" value="–¢—É—Ä—à–ª–∞–≥–∞, –±“Ø—Ç—ç—ç–ª–∏–π–Ω “Ø–µ (41‚Äì55)"> –¢—É—Ä—à–ª–∞–≥–∞, –±“Ø—Ç—ç—ç–ª—Ç “Ø–µ (30‚Äì55)</label>
            <label class="reg-row"><input type="radio" name="age" value="–£—Ö–∞–∞–Ω, –Ω”©–ª”©”©–ª–ª–∏–π–Ω “Ø–µ (56‚Äì70)"> –£—Ö–∞–∞–Ω, –Ω”©–ª”©”©–ª–ª–∏–π–Ω “Ø–µ (56+)</label>
          </form>
          <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
            <button id="btnRegister" class="oy-mini">üóùÔ∏è –ë“Ø—Ä—Ç–≥“Ø“Ø–ª—ç—Ö</button>
            <a id="btnRenew" class="oy-mini" href="#" hidden>–°—É–Ω–≥–∞—Ö</a>
          </div>
        </section>

        <!-- 2) –ú–∏–Ω–∏–π —Ö”©—Ç”©–ª–±”©—Ä (–ª–∏–Ω–∫, —Ö“Ø—Ä—ç—Ö–≥“Ø–π) -->
        <a class="oy-item" href="https://YOUR-WIX-SITE.com/my-program" target="_blank" rel="noopener">–ú–∏–Ω–∏–π —Ö”©—Ç”©–ª–±”©—Ä</a>

        <!-- 3) –°—ç—Ç–≥—ç–ª–∏–π–Ω —Ö”©—Ç”©—á (—Ç–∞–Ω–∏–ª—Ü—É—É–ª–≥–∞ —è–≥ –¥–æ—Ä–æ–æ –≥–∞—Ä–Ω–∞) -->
        <button class="oy-item" data-menu="guides">–°—ç—Ç–≥—ç–ª–∏–π–Ω —Ö”©—Ç”©—á</button>
        <section class="oy-pane" data-pane="guides" hidden>
          <div class="oy-note">
            –ù–∞—Å, –Ω”©—Ö—Ü”©–ª–¥ —Ç–∞–Ω—å —Ç–æ—Ö–∏—Ä—Å–æ–Ω —á–∏–≥–ª“Ø“Ø–ª—ç—Ö, —Å–æ—Ä–∏–ª, –±–æ–≥–∏–Ω–æ –¥–∞—Å–≥–∞–ª—ã–Ω –¢–ê–ù–ò–õ–¶–£–£–õ–ì–ê —ç–Ω–¥ –±–∞–π—Ä–ª–∞–Ω–∞.
          </div>
          <a class="oy-link-card" href="https://YOUR-WIX-SITE.com/guides" target="_blank" rel="noopener">‚Üí –î—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π —Ç–∞–Ω–∏–ª—Ü—É—É–ª–≥–∞</a>
        </section>

        <!-- 4) –°—ç—Ç–≥—ç–ª–∏–π–Ω –±–æ–ª–æ–≤—Å—Ä–æ–ª (–±–∞–≥—Ü + –Ω—ç–º—ç–ª—Ç) -->
        <button class="oy-item" data-menu="edu">–°—ç—Ç–≥—ç–ª–∏–π–Ω –±–æ–ª–æ–≤—Å—Ä–æ–ª</button>
        <section class="oy-pane" data-pane="edu" hidden>
          <h4>–ë–∞–≥—Ü —Ö”©—Ç”©–ª–±”©—Ä</h4>
          <ul class="oy-list">
            <li><span>–ë–∞–π–≥—É—É–ª–ª–∞–≥–∞</span> <a class="oy-mini" target="_blank" rel="noopener" href="https://YOUR-WIX-SITE.com/packs/family-love">–û—Ä–æ—Ö</a></li>
            <li><span>–ì—ç—Ä –±“Ø–ª</span> <a class="oy-mini" target="_blank" rel="noopener" href="https://YOUR-WIX-SITE.com/packs/confidence">–û—Ä–æ—Ö</a></li>
            <li><span>–£—Ä–ª–∞–≥,–°–ø–æ—Ä—Ç—ã–Ω –±–∞–≥</span> <a class="oy-mini" target="_blank" rel="noopener" href="https://YOUR-WIX-SITE.com/packs/career">–û—Ä–æ—Ö</a></li>
          </ul>

          <h4 style="margin-top:12px">–ù—ç–º—ç–ª—Ç —Ö”©—Ç”©–ª–±”©—Ä</h4>
          <ul class="oy-list">
            <li><span>–ì–∞–Ω—Ü–∞–∞—Ä–¥–ª–∞–∞—Å –≥–∞—Ä–∞—Ö </span> <a class="oy-mini" target="_blank" rel="noopener" href="https://YOUR-WIX-SITE.com/programs/loneliness14">–û—Ä–æ—Ö</a></li>
            <li><span>–ê–π–¥—Å–∞–∞ –¥–∞–≤–∞—Ö —Ç—É—É–ª–∞—Ö </span> <a class="oy-mini" target="_blank" rel="noopener" href="https://YOUR-WIX-SITE.com/programs/anxiety">–û—Ä–æ—Ö</a></li>
          </ul>
        </section>
      </div>
    </aside>

    <!-- CHAT -->
    <main class="oy-main">
      <div id="oyStream" class="oy-stream"></div>

      <div class="oy-composer">
        <label for="oyFile" class="oy-file" title="–ó—É—Ä–∞–≥/—Ñ–∞–π–ª –Ω—ç–º—ç—Ö">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M21 8.5l-8.485 8.485a5 5 0 11-7.071-7.071L14.5 1.858a3.5 3.5 0 114.95 4.95L9.88 16.379a2 2 0 11-2.828-2.828L16 4.603"
              fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </label>
        <input id="oyFile" type="file" accept="image/*" multiple hidden/>

        <div class="oy-input-wrap">
          <textarea id="oyInput" rows="1" placeholder="–≠–Ω–¥ –±–∏—á—ç—ç–¥ Enter –¥–∞—Ä–Ω–∞ —É—É‚Ä¶"></textarea>
          <div id="typing" class="oy-typing" hidden>
            <span></span><span></span><span></span>
          </div>
        </div>

        <button id="btnSend" class="oy-send" title="–ò–ª–≥—ç—ç—Ö">‚û§</button>
      </div>
    </main>
  </div>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js').catch(()=>{});
    });
  }
  
</script>
  <script>
(function(){
  const $=(id)=>document.getElementById(id);
  const show = ()=>$('os-auth')?.classList.add('show');
  const hide = ()=>$('os-auth')?.classList.remove('show');

  $('os_auth_signup')?.addEventListener('click', ()=>{ location.href='https://oyunsanaa.com'; });
  $('os_auth_login')?.addEventListener('click', submit);
  $('os_auth_pass')?.addEventListener('keydown', e=>{ if(e.key==='Enter') submit(); });

  async function submit(){
    const email = $('os_auth_email')?.value.trim() || '';
    const code  = $('os_auth_pass')?.value.trim() || '';
    const remember = $('os_auth_rem')?.checked || false;
    const r = await fetch('/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,code,remember})});
    if(r.ok){ hide(); location.replace('/chat'); } else { $('os_auth_err').style.display='block'; }
  } 

  // –≠—Ö–ª—ç—ç–¥ “Ø—Ä–≥—ç–ª–∂ —Ö–∞—Ä—É—É–ª ‚Üí —Å–µ—Ä–≤–µ—Ä –∑”©–≤ –≥—ç–≤—ç–ª –Ω—É—É–∂ –∞–∂–∏–ª–ª—É—É–ª
  show();
  fetch('/api/auth-check', { method:'GET', credentials:'include' })
    .then(r=>r.json())
    .then(d=>{ if(d?.ok) hide(); })
    .catch(()=>{});
})();
</script>
</script>
</body>
</html>





